# 发布流程

整体流程上遵循Git Flow，具体实现根据项目实际情况有所调整

![img](README.assets/1366859-091b03e7e4a6daa3.png)

1. 每天晚上8点从develop全量取版本发布POC环境进行测试
2. 新的修改和POC环境的缺陷继续在develop分支开发
3. 准备发布正式环境时，从develop建了一个release分支，并发布至POC环境（或预发布环境），测试缺陷在release分支修改（分配问题时，需要描述清楚在哪个分支修改，没有特殊说明的，默认在develop分支修改），其他功能在develop分支修改
4. release测试通过后，合并至master发布正式版本，并标记tag，并且需要同步将release分支合并回develop分支（此步骤需要华资和创智坐在一起来完成）
5. 正式环境紧急缺陷，从master创建hotfix分支进行修复，修复完成后，同步合并至master和develop，如果存在未发布的release，也需要合并
6. 长期不能发布的功能，从develop创建feature分支进行开发，feature非必要不创建，减小合并压力

# 操作原则

1. 一个问题报告的修改，尽量只进行一次提交
2. 一次提交只包含一个问题报告的内容
3. 本地不要包含太多未提交的内容，尽量能做到本地代码是可以全量提交的（为什么做不到，需要收集素材来具体解决）

# 操作建议

1. 开始修改代码之前，先更新
2. 修改完成之后，先commit，再push
3. 不要急着push，本地多测试一下，再push
4. 本地测试发现错误，继续修改，修改后再次commit，为了做到一个问题报告只进行一次提交，后续提交使用 amend commit
5. 本地测试无误后，尝试push至远程仓库，如果提示有冲突，不要继续提交
6. push有冲突时，先更新，然后解决冲突，解决冲突有merge和rebase两种方式，建议使用rebase方式
7. 不要担心有冲突，大概率只是提交先后顺序问题，并不需要人工干预
8. 真的有冲突需要人工解决，能解决的自行解决，不知道怎么解决的，联系负责人协助解决
9. 解决冲突后，先本地测一测，没问题了再push
